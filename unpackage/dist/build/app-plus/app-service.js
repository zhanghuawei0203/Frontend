if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((a=>t.resolve(e()).then((()=>a))),(a=>t.resolve(e()).then((()=>{throw a}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e,t,...a){uni.__log__?uni.__log__(e,t,...a):console[e].apply(console,[...a,t])}__definePage("pages/index/index",((e,t)=>{const a=e.__vccOpts||e;for(const[r,n]of t)a[r]=n;return a})({data:()=>({selectedImage:"",resultImage:""}),methods:{chooseImage(){uni.chooseImage({count:1,success:e=>{this.selectedImage=e.tempFilePaths[0]},fail:e=>{t("error","at pages/index/index.vue:35","选择图片失败",e)}})},takePhoto(){uni.takePhoto({quality:"high",success:e=>{this.selectedImage=e.tempImagePath},fail:e=>{t("error","at pages/index/index.vue:46","拍照失败",e)}})},detectImage(){if(this.selectedImage){const e="http://10.153.72.152:8080/detect";uni.uploadFile({url:e,filePath:this.selectedImage,name:"image",responseType:"arraybuffer",success:e=>{if(200===e.statusCode){const a=JSON.parse(e.data);a.image_url?(this.resultImage=`http://10.153.72.152:8080${a.image_url}`,t("log","at pages/index/index.vue:65",this.resultImage)):t("error","at pages/index/index.vue:67","后端返回的结果中没有图片 URL")}else t("error","at pages/index/index.vue:70","上传失败，状态码：",e.statusCode)},fail:e=>{t("error","at pages/index/index.vue:74","上传失败",e)}})}else t("error","at pages/index/index.vue:78","请先选择或拍摄图片")}}},[["render",function(t,a,r,n,o,i){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"title"},"YOLOv8目标检测"),e.createElementVNode("view",{class:"upload-section"},[e.createElementVNode("button",{onClick:a[0]||(a[0]=(...e)=>i.chooseImage&&i.chooseImage(...e))},"选择图片"),e.createElementVNode("button",{onClick:a[1]||(a[1]=(...e)=>i.takePhoto&&i.takePhoto(...e))},"拍照上传"),e.createElementVNode("button",{onClick:a[2]||(a[2]=(...e)=>i.detectImage&&i.detectImage(...e))},"检测")]),e.createElementVNode("view",{class:"image-section"},[o.selectedImage?(e.openBlock(),e.createElementBlock("image",{key:0,src:o.selectedImage,mode:"aspectFit",class:"original-image"},null,8,["src"])):e.createCommentVNode("",!0),o.resultImage?(e.openBlock(),e.createElementBlock("image",{key:1,src:o.resultImage,mode:"aspectFit",class:"result-image"},null,8,["src"])):e.createCommentVNode("",!0)])])}],["__scopeId","data-v-eb5c6c43"]]));const a={onLaunch:function(){t("log","at App.vue:4","App Launch")},onShow:function(){t("log","at App.vue:7","App Show")},onHide:function(){t("log","at App.vue:10","App Hide")}};const{app:r,Vuex:n,Pinia:o}={app:e.createVueApp(a)};uni.Vuex=n,uni.Pinia=o,r.provide("__globalStyles",__uniConfig.styles),r._component.mpType="app",r._component.render=()=>{},r.mount("#app")}(Vue);
